// In the edgePaths .attr('d'), replace the straight line with curvy quadratic Bezier for water-like flow:
.attr('d', d => {
  const source = graph.node(d.source);
  const target = graph.node(d.target);
  const dx = target.x - source.x;
  const dy = target.y - source.y;
  let nx = -dy;
  let ny = dx;
  const len = Math.sqrt(nx * nx + ny * ny) || 1;
  nx /= len;
  ny /= len;
  const offset = 15; // Gentle curve for flow
  const controlX = (source.x + target.x) / 2 + offset * nx;
  const controlY = (source.y + target.y) / 2 + offset * ny;
  return `M${source.x},${source.y} Q${controlX},${controlY} ${target.x},${target.y}`;
})
